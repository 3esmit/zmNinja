<div ng-controller="ModalCtrl">
    <ion-modal-view cache="false">
        <ion-content style="background-color:#444444">
            <ion-scroll has-bouncing=false min-zoom=1 zooming="true"
                        direction="xy" style="width: 100%; ">
                <div style="height: 100vh;">
                    <img imageonload="finishedLoadingImage()"
                         ng-src="{{loginData.streamingurl}}/cgi-bin/zms?source=event&mode=jpeg&event={{eventId}}&frame=1&maxfps={{loginData.maxFPS}}&replay=single&user={{loginData.username}}&pass={{loginData.password}}&connkey={{connKey}}&rand={{rand}}"
                         ng-class="{'zm-image-fit':imageFit==true, 'zm-image-crop':imageFit==false}" />
                </div>
            </ion-scroll>
        </ion-content>
    </ion-modal-view>

    <nav mfb-menu position="br" effect="zoomin" label="collapse"
         active-icon="ion-chevron-down" resting-icon="ion-chevron-up"
         toggling-method="click">

        <a mfb-button icon="ion-arrow-resize" label="fit image"
           ng-click="scaleImage();"></a>
        <a mfb-button icon="ion-reply" label="previous event"
           ng-click="controlEventStream(eventCommands.previous)"></a>
        <a mfb-button icon="ion-forward" label="next event"
           ng-click="controlEventStream(eventCommands.next)"></a>
        <a mfb-button icon="ion-close"
                label="exit event view" ng-click="closeModal()"> </a>

    </nav>

    <nav mfb-menu position="bl" effect="zoomin" label="collapse"
         active-icon="ion-chevron-down" resting-icon="ion-chevron-up" toggling-method="click">
        <a mfb-button icon="ion-refresh" label="refresh" ng-click="reloadView()"></a>
        <a mfb-button icon="ion-pause" label="pause"
           ng-click="controlEventStream(eventCommands.pause)"></a>
        <a mfb-button icon="ion-play" label="play"
           ng-click="controlEventStream(eventCommands.play)"></a>
    </nav>


    <nav mfb-menu position="tr" effect="zoomin" label="collapse"
         active-icon="ion-chevron-up" resting-icon="ion-chevron-down"
         toggling-method="click">
        <a mfb-button icon="ion-ios-fastforward" label="fast forward"
           ng-click="controlEventStream(eventCommands.fastFwd)"></a>
        <a mfb-button icon="ion-ios-fastforward-outline" label="slow forward"
           ng-click="controlEventStream(eventCommands.slowFwd)"></a>
        <a mfb-button icon="ion-ios-rewind" label="fast rewind"
           ng-click="controlEventStream(eventCommands.fastRev)"></a>
        <a mfb-button icon="ion-ios-rewind-outline" label="slow rewind"
           ng-click="controlEventStream(eventCommands.slowRev)"></a>
    </nav>

    <progress max="{{totalEventTime}}" value="{{currentEventTime}}"
              class="eventprogress"></progress>


</div>
